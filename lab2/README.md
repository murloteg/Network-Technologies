# Передача файла по TCP с подсчётом скорости передачи данных

### Необходимо разработать протокол передачи произвольного файла с одного компьютера на другой, и написать клиент и сервер, реализующие этот протокол.

<span style="font-size: 16px">
    <code>Входные параметры:</code>
    <ul>
        <li><i>Серверу передаётся в параметрах номер порта, на котором он будет ждать входящих соединений от клиентов</i>;</li>
        <li><i>Клиенту передаётся в параметрах относительный или абсолютный путь к файлу, который нужно отправить</i>;</li>
        <li><i>Длина имени файла не превышает 4096 байт в кодировке UTF-8. Размер файла не более 1 терабайта</i>;</li>
        <li><i>Клиенту также передаётся в параметрах DNS-имя (или IP-адрес) и номер порта сервера</i>;</li>
        <li><i>Клиент передаёт серверу имя файла в кодировке UTF-8, размер файла и его содержимое</i>;</li>
    </ul>
    <code>Дополнительные сведения:</code>
    <br>
    <ul>
        <li>Сервер должен выводить скорость приёма данных от клиента;</li>
        <li>Для передачи используется TCP. Протокол передачи нужно придумать самим;</li>
        <li>Сервер сохраняет полученный файл в поддиректорию uploads своей текущей директории;</li>
        <li>Сервер никогда не должен писать за пределы директории uploads;</li>
        <li>Имя файла, по возможности, совпадает с именем, которое передал клиент;</li>
        <li>
            В процессе приёма данных от клиента, сервер должен раз в 3 секунды выводить в консоль мгновенную скорость приёма и среднюю скорость за сеанс.<br>
            Под скоростью здесь подразумевается количество байтов переданных за единицу времени;
        </li>
        <li>
            Скорости выводятся отдельно для каждого активного клиента.<br>
            Если клиент был активен менее 3 секунд, скорость всё равно должна быть выведена для него один раз;
        </li>
        <li>После успешного сохранения всего файла сервер проверяет, совпадает ли размер полученных данных с размером, переданным клиентом, и сообщает клиенту об успехе или неуспехе операции, после чего закрывает соединение;</li>
        <li>Клиент должен вывести на экран сообщение о том, успешной ли была передача файла;</li>
        <li>Все используемые ресурсы ОС должны быть корректно освобождены, как только они больше не нужны;</li>
        <li>Сервер должен уметь работать параллельно с несколькими клиентами. Для этого необходимо использовать threads;</li>
        <li>Сразу после приёма соединения от одного клиента, сервер ожидает следующих клиентов;</li>
        <li>В случае ошибки сервер должен разорвать соединение с клиентом. При этом он должен продолжить обслуживать остальных клиентов;</li>
    </ul>
    <code>Приложение должно корректно отрабатывать в следующих сценариях:</code>
    <ul>
        <li><b>Маленький размер файла</b> (0 байт, 1 байт и т.д.);</li>
        <li><b>Большой размер файла</b> (~1 Гб);</li>
    </ul>
</span>
